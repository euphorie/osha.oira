<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:meta="http://xml.zope.org/namespaces/meta"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="euphorie"
      meta:interpolation="true"
      tal:omit-tag="">

  <p tal:define="status view/status"
     tal:condition="status"
     class="message ${python:'error' if view.widgets.errors else 'notice'}"
     tal:content="status" i18n:domain="plone">Form-global message</p>
  <p class="discrete" tal:condition="python:getattr(view, 'description', None)">${view/description}</p>

  <form class="concise" action="${request/getURL}" method="${view/method}" enctype="${view/enctype}">
    <fieldset>
      <tal:widget replace="structure view/widgets/title/render" />
      <tal:widget replace="structure view/widgets/question/render" />
      <tal:widget replace="structure view/widgets/label_multiple_present/render" />
      <tal:widget replace="structure view/widgets/label_single_occurance/render" />
      <tal:widget replace="structure view/widgets/label_multiple_occurances/render" />
    </fieldset>
    <fieldset>
      <tal:widget replace="structure view/widgets/description/render" />
    </fieldset>

    <div class="buttonBar" tal:define="actions view/actions/values|nothing" tal:condition="actions">
      <tal:action repeat="action actions" replace="structure action/render" />
    </div>
  </form>

  <style type="text/css">
    .example {
      background-color: #ebebeb;
      border: 1px solid black;
      padding: 10px;
    }

    .example fieldset.comprehensive p.legend {
      width: 70% !important;
    }

    .example fieldset.concise label {
      width: 45%;
    }

    .example .focus {
      background: #fef5ba;
    }

  </style>

  <h2 i18n:translate="">Client example for single occurance.</h2>

  <div class="example">
    <h3 class="example-title" i18n:translate="">Commercial manned guarding</h3>

    <fieldset class="concise">
      <fieldset class="comprehensive">
        <legend class="example-question" i18n:translate="">Does your organisation provide mobile patrolling?</legend>
        <label><input type="radio" checked="checked" disabled="disabled"/> <tal:span i18n:translate="">Yes</tal:span></label>
        <label><input type="radio" disabled="disabled"/> <tal:span i18n:translate="">No</tal:span></label>
      </fieldset>
      <fieldset class="comprehensive">
        <legend class="example-label_multiple_present" i18n:translate="">Do you ofer this service in multiple locations?</legend>
        <label><input type="radio" disabled="disabled"/> <tal:span i18n:translate="">Yes</tal:span></label>
        <label><input type="radio" checked="checked" disabled="disabled"/> <tal:span i18n:translate="">No</tal:span></label>
      </fieldset>
      <label class="example-label_single_occurance"><tal:span i18n:translate="">Please enter a name for the location you would like to assess</tal:span>
        <input type="text" disabled="disabled" class="span-5" i18n:attributes="value" value="Standard Life Insurance"/></label>
    </fieldset>
  </div>

  <h2 i18n:translate="">Client example for multiple occurances.</h2>

  <div class="example">
    <h3 class="example-title" i18n:translate="">Commercial manned guarding</h3>

    <fieldset class="concise">
      <fieldset class="comprehensive">
        <legend class="example-question" i18n:translate="">Does your organisation provide mobile patrolling?</legend>
        <label><input type="radio" checked="checked" disabled="disabled"/> <tal:span i18n:translate="">Yes</tal:span></label>
        <label><input type="radio" disabled="disabled"/> <tal:span i18n:translate="">No</tal:span></label>
      </fieldset>
      <fieldset class="comprehensive">
        <legend class="example-label_multiple_present" i18n:translate="">Do you ofer this service in multiple locations?</legend>
        <label><input type="radio" checked="checked" disabled="disabled"/> <tal:span i18n:translate="">Yes</tal:span></label>
        <label><input type="radio" disabled="disabled"/> <tal:span i18n:translate="">No</tal:span></label>
      </fieldset>
      <fieldset class="comprehensive">
        <legend class="example-label_multiple_occurances" i18n:translate="">Please enter the name for each location you would like to assess</legend>
        <ul>
          <li><input type="text" disabled="disabled" class="span-5" i18n:attributes="value" value="Tesco, Morningside"/><button class="micro" i18n:translate="">Remove</button></li>
          <li><input type="text" disabled="disabled" class="span-5" i18n:attributes="value" value="Castle Terrace car park"/><button class="micro" i18n:translate="">Remove</button></li>
          <li><button class="small" i18n:translate="">Add another item</button></li>
        </ul>
      </fieldset>
    </fieldset>
  </div>

  <script type="text/javascript">
    // <![CDATA
    function getText(node) {
        var text="";

        for (var child=node.firstChild; child!==null && child.nodeType===3; child=child.nextSibling)
          text+=child.nodeValue;
        return text;
    }

    function setText(node, text) {
        var child;
        while (node.firstChild!==null && node.firstChild.nodeType===3)
          node.removeChild(node.firstChild);
        var text_node = document.createTextNode(text);
        if (node.firstChild===null)
          node.appendChild(text_node);
        else
          node.insertBefore(text_node, node.firstChild);
    }

    function init() {
      // Wait until jQuery has finished loading
      if (window.jQuery===undefined) {
        setTimeout(init, 20);
        return;
      }

      jQuery("form :input").each(function() {
          var selector = /form\.widgets\.(.*)/.exec(this.name);
          if (selector===null)
              return;
          selector=".example .example-"+selector[1];
          var $examples = jQuery(selector);
          if ($examples.length===0)
              return;
          jQuery(this)
              .focus(function() { jQuery(selector).addClass("focus"); })
              .blur(function() { jQuery(selector).removeClass("focus"); })
              .keyup(function() {
                  var text = this.value;
                  jQuery(selector).each(function() {
                      var $this = jQuery(this);
                      if (!$this.data("original")) {
                          $this.data("original", getText(this));
                          if (!text)
                              return;
                      }
                      if (!text)
                          text=$this.data("original");
                      setText(this, text);
                  });
              });
      });
    }

    init();
    // ]]>
  </script>
</html>
