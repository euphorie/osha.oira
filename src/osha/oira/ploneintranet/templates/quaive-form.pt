<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:meta="http://xml.zope.org/namespaces/meta"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      meta:interpolation="true"
      metal:use-macro="context/@@layout/macros/layout"
      tal:define="
        actions view/actions/values|nothing;
      "
      i18n:domain="nuplone"
>

  <metal:title fill-slot="title">${view/label}</metal:title>
  <metal:content fill-slot="content">
    <div id="quaive-content">
      <form class="pat-form pat-inject"
            id="${view/id}"
            action="${python: request.get('quaive_edit_url') or request.getURL()}"
            enctype="${view/enctype}"
            method="${view/method}"
            data-pat-inject="
              source: #application-body; target: #application-body; history: record; &amp;&amp;
              source: #sidebar-assessments; target: #sidebar-assessments
            "
      >
        <div class="pat-toolbar sticky"
             id="sector-toolbar"
        >
          <div class="toolbar-functions-area pat-inject pat-form pat-autosubmit"
               id="toolbar-functions-area-assessments"
          >
            <div class="toolbar-section quick-functions"
                 id="sector-toolbar-quick-functions"
            >
              <tal:action repeat="action python: reversed(actions)"
                          replace="structure action/render"
              />

            </div>
          </div>
        </div>

        <div class="container">
          <div class="pat-well">
            <div class="well-title-group">
              <h2 class="well-header">${view/label}</h2>
              <div class="buttons">
                <dfn class="icon help help-icon pat-tooltip tooltip-active-click"
                     data-pat-tooltip="class: info; trigger: click; source: content; position-list: tl"
                     tal:condition="python:getattr(view, 'description', None)"
                >
                  ${view/description}
                </dfn>
              </div>
            </div>

            <p class="message ${python:'error' if view.widgets.errors else 'notice'}"
               tal:define="
                 status view/status;
               "
               tal:condition="status"
               tal:content="status"
               i18n:domain="plone"
            >Form-global message</p>
            <fieldset class="section horizontal">
              <tal:widget tal:repeat="widget view/widgets/values">
                <tal:widget define="
                              error nocall: widget/error|nothing;
                            ">
                  ${structure: widget/render}
                  <p class="pat-notice error"
                     tal:condition="python: error"
                  >
                    ${structure: error/render}
                  </p>
                </tal:widget>
              </tal:widget>
            </fieldset>

          </div>

          <div class="pat-page-module type-planned-measures pat-well pat-collapsible borderless open"
               id="fieldset-${group/__name__}"
               data-pat-collapsible="
                store: local;
                scroll-selector: self;
                scroll-offset: 120px;
                open-trigger: .expand-all-sections;
                close-trigger: .collapse-all-sections;"
               tal:repeat="group view/groups|nothing"
          >
            <div class="well-title-group">
              <h2 class="well-header">
              ${group/label}
                <div class="buttons">
                  <dfn class="icon help help-icon pat-tooltip tooltip-active-click"
                       data-pat-tooltip="class: info; trigger: click; source: content; position-list: tl"
                       tal:define="
                         description group/description;
                       "
                       tal:condition="description"
                  >
                  ${description}
                  </dfn>
                </div>
              </h2>
            </div>
            <div class="panel-content"
                 style=""
            >
              <fieldset class="horizontal">
                <tal:widget tal:repeat="widget group/widgets/values">
                  <tal:widget define="
                                error nocall: widget/error|nothing;
                              ">
                    ${structure: widget/render}
                    <p class="pat-notice error"
                       tal:condition="python: error"
                    >
                      ${structure: error/render}
                    </p>
                  </tal:widget>
                </tal:widget>
              </fieldset>
            </div>
          </div>
        </div>
        <input name="oira_type"
               type="hidden"
               value="${python: view.__name__.rpartition('-')[-1]}"
        />
      </form>
    </div>
  </metal:content>
</html>
